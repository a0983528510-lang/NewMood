{% extends 'base.html' %}
{% block content %}
  <div class="sticky-wrap">
    <div class="sticky orange">
      <h3>Your draw history</h3>
      {% if not items %}
        <p>No draws yet.</p>
      {% else %}
        <div class="note-grid">
          {% for it in items %}
          <div class="polaroid-container" onclick="this.querySelector('.polaroid').classList.toggle('flip')">
            <div class="polaroid">
              <!-- 背面：灰黑 -->
              <div class="polaroid-face back">
                <div class="back-content"><div class="back-seal">NewMood</div></div>
              </div>
              <!-- 正面：白底外框 -->
              <div class="polaroid-face front">
                <div class="frame">
                  <div class="band top">
                    <span><b>{{ it.title }}</b>{% if it.nickname %} — {{ it.nickname }}{% endif %}</span>
                  </div>
                  <div class="photo"
                       {% if it.thumbnail %}style="background-image:url('{{ it.thumbnail }}')" {% endif %}>
                    {% if not it.thumbnail %}<span class="cover-icon">🎵</span>{% endif %}
                  </div>
                  <div class="band bottom">
                    <span>
                      {% if it.reason %}{{ it.reason }}{% endif %}
                      {% if it.link %}<span class="play-link" style="margin-left:6px;"><a href="{{ it.link }}" target="_blank" rel="noopener">Play</a></span>{% endif %}
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
      {% endif %}
    </div>
  </div>
{% endblock %}
