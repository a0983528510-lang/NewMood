{% extends 'base.html' %}
{% block content %}
  <div class="sticky-wrap">
    <div class="sticky orange">
      <h3>Your draw history</h3>
      {% if not items %}
        <p>No draws yet.</p>
      {% else %}
        <div class="note-grid">
          {% for it in items %}
          <div class="polaroid-container" onclick="this.querySelector('.polaroid').classList.toggle('flip')">
            <div class="polaroid">
              <!-- 背面 -->
              <div class="polaroid-face back">
                <div class="back-content">
                  <img src="{{ url_for('static', filename='images/logo.png') }}" class="back-logo" alt="NewMood" />
                  <div class="back-text">NewMood</div>
                </div>
              </div>

              <!-- 正面 -->
              <div class="polaroid-face front">
                <div class="cover"
                     {% if it.thumbnail %}
                       style="background-image: url('{{ it.thumbnail }}')"
                     {% endif %}>
                  {% if not it.thumbnail %}
                    <span class="cover-icon">🎵</span>
                  {% endif %}
                </div>
                <div class="info">
                  <div class="title-artist"><b>{{ it.title }}</b> — {{ it.artist }}</div>

                  {% if it.link %}
                  <div class="play-link">
                    <a href="{{ it.link }}" target="_blank" rel="noopener">Play</a>
                  </div>
                  {% endif %}

                  {% if it.reason %}
                  <div class="reason">{{ it.reason }}</div>
                  {% endif %}

                  {% if it.nickname %}
                  <div class="signer">— {{ it.nickname }}</div>
                  {% endif %}

                  <div class="dim">{{ it.created_at }}</div>
                </div>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
      {% endif %}
    </div>
  </div>
{% endblock %}
